<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Guess The Number â€” MiniFun</title>
    <link href="style.css" rel="stylesheet" type="text/css">
    <style>
        .game-wrap{max-width:720px;margin:28px auto;padding:18px;border-radius:12px;background:linear-gradient(180deg,#fff,#f3f8ff);box-shadow:0 6px 24px rgba(7,22,48,0.06)}
        .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
        .panel{background:#fff;padding:12px;border-radius:8px;border:1px solid #e6eefc}
        .guess-history{max-height:120px;overflow:auto;padding:8px;border-radius:6px;background:#fbfdff;border:1px solid #eef6ff}
        input[type=number]{width:120px;padding:8px;border-radius:6px;border:1px solid #cfe0ff}
        button{padding:8px 12px;border-radius:6px;border:none;background:#0b66c2;color:#fff;cursor:pointer}
        @media(max-width:520px){.row{flex-direction:column;align-items:stretch}input[type=number]{width:100%}}
    </style>
</head>
<body>
    <main class="game-wrap">
        <h1>Guess The Number</h1>

        <div class="row" style="margin-bottom:12px">
            <label class="panel">Range: 1 to
                <select id="maxRange">
                    <option value="20">20</option>
                    <option value="50">50</option>
                    <option value="100" selected>100</option>
                    <option value="500">500</option>
                </select>
            </label>

            <label class="panel">Difficulty:
                <select id="difficulty">
                    <option value="easy">Easy (many attempts)</option>
                    <option value="normal" selected>Normal</option>
                    <option value="hard">Hard (few attempts)</option>
                </select>
            </label>

            <label class="panel">Mode:
                <select id="mode">
                    <option value="standard" selected>Standard</option>
                    <option value="time">Time Attack</option>
                    <option value="oneguess">One-Guess</option>
                </select>
            </label>

            <button id="startBtn">Start Game</button>
        </div>

        <div class="row" style="gap:18px;margin-bottom:12px">
            <div class="panel" style="flex:1">
                <div style="margin-bottom:6px">Attempts left: <strong id="attempts">â€”</strong></div>
                <div style="margin-bottom:6px">Score: <strong id="score">0</strong></div>
                <div style="margin-bottom:6px">Time: <strong id="timer">--</strong></div>
                <div style="margin-bottom:6px">Best: <strong id="best">â€”</strong></div>
            </div>

            <div class="panel" style="flex:2">
                <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
                    <input id="guessInput" type="number" min="1" value="" placeholder="Enter your guess">
                    <button id="guessBtn">Guess</button>
                    <button id="hintBtn">Hint</button>
                    <button id="restartBtn" style="background:#ef5350">Restart</button>
                </div>
                <div id="message" style="min-height:22px;margin-bottom:8px"></div>
                <div class="guess-history" id="history">No guesses yet.</div>
            </div>
        </div>

        <div style="font-size:13px;color:#234566">Tip: Use arrow keys + Enter to submit. Scores saved locally.</div>
    </main>

    <script>
        const $ = id => document.getElementById(id);
        let secret = 0, attemptsLeft = 0, maxRange = 100, score = 0, timer = null, timeLeft = 0;

        function attemptsFor(difficulty){
            if(difficulty === 'easy') return Math.max(15, Math.floor(maxRange/4));
            if(difficulty === 'normal') return Math.max(8, Math.floor(maxRange/10));
            return Math.max(4, Math.floor(maxRange/25));
        }

        function resetUI(){
            $('history').textContent = 'No guesses yet.';
            $('message').textContent = '';
            $('guessInput').value = '';
            $('timer').textContent = '--';
        }

        function startGame(){
            maxRange = Number($('maxRange').value);
            const diff = $('difficulty').value;
            const mode = $('mode').value;
            secret = Math.floor(Math.random()*maxRange) + 1;
            attemptsLeft = attemptsFor(diff);
            score = 0;
            $('attempts').textContent = attemptsLeft;
            $('score').textContent = score;
            $('best').textContent = localStorage.getItem(bestKey()) || 'â€”';
            resetUI();

            if(mode === 'time'){
                timeLeft = Math.max(10, Math.floor(maxRange/2));
                $('timer').textContent = timeLeft + 's';
                startTimer();
            } else {
                clearTimer();
            }
        }

        function bestKey(){ return `guess-best-${maxRange}-${$('difficulty').value}-${$('mode').value}`; }

        function recordGuess(g){
            if($('history').textContent === 'No guesses yet.') $('history').textContent = '';
            const el = document.createElement('div');
            el.textContent = `${new Date().toLocaleTimeString()}: ${g}`;
            $('history').prepend(el);
        }

        function giveHint(){
            const dist = Math.abs(secret - Number($('guessInput').value || 0));
            if(dist === 0) $('message').textContent = 'You are at the number!';
            else if(dist <= Math.max(1, Math.floor(maxRange*0.02))) $('message').textContent = 'ðŸ”¥ Very close!';
            else if(dist <= Math.max(3, Math.floor(maxRange*0.05))) $('message').textContent = 'Warm';
            else $('message').textContent = (secret % 2 === 0 ? 'Even' : 'Odd');
        }

        function makeGuess(){
            const val = Number($('guessInput').value);
            if(!val || val < 1 || val > maxRange){ $('message').textContent = 'Enter a valid number in range.'; return; }
            recordGuess(val);
            attemptsLeft -= 1;
            $('attempts').textContent = attemptsLeft;

            if(val === secret){
                const gained = Math.max(10, attemptsLeft*10 + (timeLeft || 0));
                score += gained;
                $('score').textContent = score;
                $('message').textContent = `ðŸŽ‰ Correct! +${gained} points`;
                saveBest();
                clearTimer();
                // auto-restart next round after a pause
                setTimeout(startGame, 1200);
                return;
            }

            const hint = val > secret ? 'Too high' : 'Too low';
            $('message').textContent = hint;

            if(attemptsLeft <= 0){
                $('message').textContent = `Game over â€” the number was ${secret}`;
                clearTimer();
                saveBest();
            }
        }

        function saveBest(){
            const key = bestKey();
            const existing = Number(localStorage.getItem(key) || 0);
            if(score > existing) localStorage.setItem(key, score);
            $('best').textContent = localStorage.getItem(key) || 'â€”';
        }

        function startTimer(){ clearTimer(); timer = setInterval(()=>{
            timeLeft -= 1; $('timer').textContent = timeLeft + 's';
            if(timeLeft <= 0){ clearTimer(); $('message').textContent = `Time! The number was ${secret}`; saveBest(); }
        },1000); }
        function clearTimer(){ if(timer){ clearInterval(timer); timer = null; } }

        // wire up
        $('startBtn').addEventListener('click', startGame);
        $('guessBtn').addEventListener('click', makeGuess);
        $('hintBtn').addEventListener('click', giveHint);
        $('restartBtn').addEventListener('click', ()=>{ clearTimer(); startGame(); });

        // keyboard
        $('guessInput').addEventListener('keydown', (e)=>{ if(e.key === 'Enter') makeGuess(); });

        // initialize
        (function(){
            $('best').textContent = localStorage.getItem(bestKey()) || 'â€”';
            startGame();
        })();
    </script>
</body>
</html>
